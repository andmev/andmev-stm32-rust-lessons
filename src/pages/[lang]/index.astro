---
import HomeTemplate from '@/components/HomeTemplate.astro';
import { getAvailableLanguages } from '@/utils/languages';
import { validateLanguage } from '@/utils/validators';
import { t, type SupportedLanguage } from '@/i18n/translations';

export async function getStaticPaths() {
  const languages = await getAvailableLanguages();
  return languages.map((lang) => ({ params: { lang } }));
}

const { lang } = Astro.params;

// Validate language parameter for type safety
if (!lang || !validateLanguage(lang)) {
  return Astro.redirect('/404');
}

// Get lesson label from centralized translations
const lessonLabel = t(lang as SupportedLanguage, 'lesson');
---

<HomeTemplate lang={lang} lessonLabel={lessonLabel} />
